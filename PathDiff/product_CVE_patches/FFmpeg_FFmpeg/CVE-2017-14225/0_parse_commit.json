{
    "current_hash": "837cb4325b712ff1aab531bf41668933f61d75d2",
    "parent_hash": "2b44dcbc44e99daf9515753e9fd4c2e1ea53a2fa",
    "modified_file_0": {
        "mod_filename": "ffprobe.c",
        "status": "modified",
        "add_lines": 12,
        "dele_lines": 8,
        "patch": "@@ -1925,6 +1925,16 @@ static void print_pkt_side_data(WriterContext *w,\n     writer_print_section_footer(w);\n }\n \n+static void print_primaries(WriterContext *w, enum AVColorPrimaries color_primaries)\n+{\n+    const char *val = av_color_primaries_name(color_primaries);\n+    if (!val || color_primaries == AVCOL_PRI_UNSPECIFIED) {\n+        print_str_opt(\"color_primaries\", \"unknown\");\n+    } else {\n+        print_str(\"color_primaries\", val);\n+    }\n+}\n+\n static void clear_log(int need_lock)\n {\n     int i;\n@@ -2116,10 +2126,7 @@ static void show_frame(WriterContext *w, AVFrame *frame, AVStream *stream,\n         else\n             print_str_opt(\"color_space\", av_color_space_name(frame->colorspace));\n \n-        if (frame->color_primaries != AVCOL_PRI_UNSPECIFIED)\n-            print_str(\"color_primaries\", av_color_primaries_name(frame->color_primaries));\n-        else\n-            print_str_opt(\"color_primaries\", av_color_primaries_name(frame->color_primaries));\n+        print_primaries(w, frame->color_primaries);\n \n         if (frame->color_trc != AVCOL_TRC_UNSPECIFIED)\n             print_str(\"color_transfer\", av_color_transfer_name(frame->color_trc));\n@@ -2516,10 +2523,7 @@ static int show_stream(WriterContext *w, AVFormatContext *fmt_ctx, int stream_id\n         else\n             print_str_opt(\"color_transfer\", av_color_transfer_name(par->color_trc));\n \n-        if (par->color_primaries != AVCOL_PRI_UNSPECIFIED)\n-            print_str(\"color_primaries\", av_color_primaries_name(par->color_primaries));\n-        else\n-            print_str_opt(\"color_primaries\", av_color_primaries_name(par->color_primaries));\n+        print_primaries(w, par->color_primaries);\n \n         if (par->chroma_location != AVCHROMA_LOC_UNSPECIFIED)\n             print_str(\"chroma_location\", av_chroma_location_name(par->chroma_location));"
    }
}