{
    "current_hash": "23e5cbe6b090d7f22982aee909a6a618174d3c2d",
    "parent_hash": "d79d9138568f3dda47a26633b496cce492cf8d52",
    "modified_file_0": {
        "mod_filename": "libvncclient/rfbproto.c",
        "status": "modified",
        "add_lines": 7,
        "dele_lines": 4,
        "patch": "@@ -1151,10 +1151,13 @@ rfbBool\n SetFormatAndEncodings(rfbClient* client)\n {\n   rfbSetPixelFormatMsg spf;\n-  char buf[sz_rfbSetEncodingsMsg + MAX_ENCODINGS * 4];\n+  union {\n+    char bytes[sz_rfbSetEncodingsMsg + MAX_ENCODINGS*4];\n+    rfbSetEncodingsMsg msg;\n+  } buf;\n \n-  rfbSetEncodingsMsg *se = (rfbSetEncodingsMsg *)buf;\n-  uint32_t *encs = (uint32_t *)(&buf[sz_rfbSetEncodingsMsg]);\n+  rfbSetEncodingsMsg *se = &buf.msg;\n+  uint32_t *encs = (uint32_t *)(&buf.bytes[sz_rfbSetEncodingsMsg]);\n   int len = 0;\n   rfbBool requestCompressLevel = FALSE;\n   rfbBool requestQualityLevel = FALSE;\n@@ -1354,7 +1357,7 @@ SetFormatAndEncodings(rfbClient* client)\n \n   se->nEncodings = rfbClientSwap16IfLE(se->nEncodings);\n \n-  if (!WriteToRFBServer(client, buf, len)) return FALSE;\n+  if (!WriteToRFBServer(client, buf.bytes, len)) return FALSE;\n \n   return TRUE;\n }"
    }
}