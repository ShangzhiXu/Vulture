{
    "current_hash": "53073c8d7e232151ea2ecd8a1243124121e10e2d",
    "parent_hash": "e453a44ccdc642a8acfecf3533df69bdecdb4446",
    "modified_file_0": {
        "mod_filename": "libvncserver/translate.c",
        "status": "modified",
        "add_lines": 7,
        "dele_lines": 4,
        "patch": "@@ -360,9 +360,12 @@ rfbSetTranslateFunction(rfbClientPtr cl)\n static rfbBool\n rfbSetClientColourMapBGR233(rfbClientPtr cl)\n {\n-    char buf[sz_rfbSetColourMapEntriesMsg + 256 * 3 * 2];\n-    rfbSetColourMapEntriesMsg *scme = (rfbSetColourMapEntriesMsg *)buf;\n-    uint16_t *rgb = (uint16_t *)(&buf[sz_rfbSetColourMapEntriesMsg]);\n+    union {\n+        char bytes[sz_rfbSetColourMapEntriesMsg + 256 * 3 * 2];\n+        rfbSetColourMapEntriesMsg msg;\n+    } buf;\n+    rfbSetColourMapEntriesMsg *scme = &buf.msg;\n+    uint16_t *rgb = (uint16_t *)(&buf.bytes[sz_rfbSetColourMapEntriesMsg]);\n     int i, len;\n     int r, g, b;\n \n@@ -394,7 +397,7 @@ rfbSetClientColourMapBGR233(rfbClientPtr cl)\n \n     len += 256 * 3 * 2;\n \n-    if (rfbWriteExact(cl, buf, len) < 0) {\n+    if (rfbWriteExact(cl, buf.bytes, len) < 0) {\n         rfbLogPerror(\"rfbSetClientColourMapBGR233: write\");\n         rfbCloseClient(cl);\n         return FALSE;"
    }
}