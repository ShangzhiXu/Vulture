{
    "current_hash": "df8559e7bdbc6065276e786217eeee70f28fce66",
    "parent_hash": "90a63426ee93d9079a032740e519988e26d1949c",
    "modified_file_0": {
        "mod_filename": "jscompile.c",
        "status": "modified",
        "add_lines": 12,
        "dele_lines": 8,
        "patch": "@@ -794,15 +794,19 @@ static void addjump(JF, enum js_AstType type, js_Ast *target, int inst)\n \ttarget->jumps = jump;\n }\n \n-static void labeljumps(JF, js_JumpList *jump, int baddr, int caddr)\n+static void labeljumps(JF, js_Ast *stm, int baddr, int caddr)\n {\n+\tjs_JumpList *jump = stm->jumps;\n \twhile (jump) {\n+\t\tjs_JumpList *next = jump->next;\n \t\tif (jump->type == STM_BREAK)\n \t\t\tlabelto(J, F, jump->inst, baddr);\n \t\tif (jump->type == STM_CONTINUE)\n \t\t\tlabelto(J, F, jump->inst, caddr);\n-\t\tjump = jump->next;\n+\t\tjs_free(J, jump);\n+\t\tjump = next;\n \t}\n+\tstm->jumps = NULL;\n }\n \n static int isloop(enum js_AstType T)\n@@ -1121,7 +1125,7 @@ static void cstm(JF, js_Ast *stm)\n \t\tcexp(J, F, stm->b);\n \t\temitline(J, F, stm);\n \t\temitjumpto(J, F, OP_JTRUE, loop);\n-\t\tlabeljumps(J, F, stm->jumps, here(J,F), cont);\n+\t\tlabeljumps(J, F, stm, here(J,F), cont);\n \t\tbreak;\n \n \tcase STM_WHILE:\n@@ -1133,7 +1137,7 @@ static void cstm(JF, js_Ast *stm)\n \t\temitline(J, F, stm);\n \t\temitjumpto(J, F, OP_JUMP, loop);\n \t\tlabel(J, F, end);\n-\t\tlabeljumps(J, F, stm->jumps, here(J,F), loop);\n+\t\tlabeljumps(J, F, stm, here(J,F), loop);\n \t\tbreak;\n \n \tcase STM_FOR:\n@@ -1164,7 +1168,7 @@ static void cstm(JF, js_Ast *stm)\n \t\temitjumpto(J, F, OP_JUMP, loop);\n \t\tif (end)\n \t\t\tlabel(J, F, end);\n-\t\tlabeljumps(J, F, stm->jumps, here(J,F), cont);\n+\t\tlabeljumps(J, F, stm, here(J,F), cont);\n \t\tbreak;\n \n \tcase STM_FOR_IN:\n@@ -1189,12 +1193,12 @@ static void cstm(JF, js_Ast *stm)\n \t\t\temitjumpto(J, F, OP_JUMP, loop);\n \t\t}\n \t\tlabel(J, F, end);\n-\t\tlabeljumps(J, F, stm->jumps, here(J,F), loop);\n+\t\tlabeljumps(J, F, stm, here(J,F), loop);\n \t\tbreak;\n \n \tcase STM_SWITCH:\n \t\tcswitch(J, F, stm->a, stm->b);\n-\t\tlabeljumps(J, F, stm->jumps, here(J,F), 0);\n+\t\tlabeljumps(J, F, stm, here(J,F), 0);\n \t\tbreak;\n \n \tcase STM_LABEL:\n@@ -1204,7 +1208,7 @@ static void cstm(JF, js_Ast *stm)\n \t\t\tstm = stm->b;\n \t\t/* loops and switches have already been labelled */\n \t\tif (!isloop(stm->type) && stm->type != STM_SWITCH)\n-\t\t\tlabeljumps(J, F, stm->jumps, here(J,F), 0);\n+\t\t\tlabeljumps(J, F, stm, here(J,F), 0);\n \t\tbreak;\n \n \tcase STM_BREAK:"
    }
}