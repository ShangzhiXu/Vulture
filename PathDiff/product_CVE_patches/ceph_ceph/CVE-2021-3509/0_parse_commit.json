{
    "current_hash": "7a1ca8d372da3b6a4fc3d221a0e5f72d1d61c27b",
    "parent_hash": "9b8513de6b30ef8109556e477c4cb44f005f0067",
    "modified_file_0": {
        "mod_filename": "src/pybind/mgr/dashboard/controllers/docs.py",
        "status": "modified",
        "add_lines": 3,
        "dele_lines": 29,
        "patch": "@@ -5,8 +5,7 @@\n import logging\n import cherrypy\n \n-from . import Controller, BaseController, Endpoint, ENDPOINT_MAP, \\\n-    allow_empty_body\n+from . import Controller, BaseController, Endpoint, ENDPOINT_MAP\n from .. import mgr\n \n from ..tools import str_to_bool\n@@ -371,31 +370,13 @@ def api_json(self):\n     def api_all_json(self):\n         return self._gen_spec(True, \"/\")\n \n-    def _swagger_ui_page(self, all_endpoints=False, token=None):\n+    def _swagger_ui_page(self, all_endpoints=False):\n         base = cherrypy.request.base\n         if all_endpoints:\n             spec_url = \"{}/docs/api-all.json\".format(base)\n         else:\n             spec_url = \"{}/docs/api.json\".format(base)\n \n-        auth_header = cherrypy.request.headers.get('authorization')\n-        auth_cookie = cherrypy.request.cookie['token']\n-        jwt_token = \"\"\n-        if auth_cookie is not None:\n-            jwt_token = auth_cookie.value\n-        elif auth_header is not None:\n-            scheme, params = auth_header.split(' ', 1)\n-            if scheme.lower() == 'bearer':\n-                jwt_token = params\n-        else:\n-            if token is not None:\n-                jwt_token = token\n-\n-        api_key_callback = \"\"\", onComplete: () => {{\n-                        ui.preauthorizeApiKey('jwt', '{}');\n-                    }}\n-        \"\"\".format(jwt_token)\n-\n         page = \"\"\"\n         <!DOCTYPE html>\n         <html>\n@@ -436,23 +417,16 @@ def _swagger_ui_page(self, all_endpoints=False, token=None):\n                         SwaggerUIBundle.presets.apis\n                     ],\n                     layout: \"BaseLayout\"\n-                    {}\n                 }})\n                 window.ui = ui\n             }}\n         </script>\n         </body>\n         </html>\n-        \"\"\".format(spec_url, api_key_callback)\n+        \"\"\".format(spec_url)\n \n         return page\n \n     @Endpoint(json_response=False)\n     def __call__(self, all_endpoints=False):\n         return self._swagger_ui_page(all_endpoints)\n-\n-    @Endpoint('POST', path=\"/\", json_response=False,\n-              query_params=\"{all_endpoints}\")\n-    @allow_empty_body\n-    def _with_token(self, token, all_endpoints=False):\n-        return self._swagger_ui_page(all_endpoints, token)"
    }
}