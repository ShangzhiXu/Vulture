{
    "current_hash": "030af767d357d1b4088c4a25c72cb3906abac489",
    "parent_hash": "ff70c47a396ef1e3cb73c90513da4f5cb71bebba",
    "modified_file_0": {
        "mod_filename": "tensorflow/python/lib/core/ndarray_tensor.cc",
        "status": "modified",
        "add_lines": 8,
        "dele_lines": 0,
        "patch": "@@ -16,6 +16,7 @@ limitations under the License.\n #include \"tensorflow/python/lib/core/ndarray_tensor.h\"\n \n #include <cstring>\n+#include <optional>\n \n #include \"tensorflow/c/eager/tfe_context_internal.h\"\n #include \"tensorflow/c/tf_tensor_internal.h\"\n@@ -74,6 +75,13 @@ Status PyArrayDescr_to_TF_DataType(PyArray_Descr* descr,\n   PyObject* key;\n   PyObject* value;\n   Py_ssize_t pos = 0;\n+\n+  // Return an error if the fields attribute is null.\n+  // Occurs with an improper conversion attempt to resource.\n+  if (descr->fields == nullptr) {\n+    return errors::Internal(\"Unexpected numpy data type\");\n+  }\n+\n   if (PyDict_Next(descr->fields, &pos, &key, &value)) {\n     // In Python 3, the keys of numpy custom struct types are unicode, unlike\n     // Python 2, where the keys are bytes."
    }
}