{
    "current_hash": "3f6fe4dfef6f57e768260b48166c27d148f3015f",
    "parent_hash": "afd954e65f15aea4d438d0a219136fc4a63a573d",
    "modified_file_0": {
        "mod_filename": "tensorflow/core/kernels/dilation_ops.cc",
        "status": "modified",
        "add_lines": 11,
        "dele_lines": 4,
        "patch": "@@ -130,6 +130,7 @@ class DilationOp : public OpKernel {\n     ParseSizes(context, strides_, rates_, padding_, &stride_rows, &stride_cols,\n                &rate_rows, &rate_cols, &pad_top, &pad_left, &out_rows,\n                &out_cols);\n+    if (!context->status().ok()) return;\n \n     // Output tensor is of the following dimensions:\n     // [ batch, out_rows, out_cols, depth ]\n@@ -229,6 +230,7 @@ class DilationBackpropInputOp : public OpKernel {\n     ParseSizes(context, strides_, rates_, padding_, &stride_rows, &stride_cols,\n                &rate_rows, &rate_cols, &pad_top, &pad_left, &out_rows,\n                &out_cols);\n+    if (!context->status().ok()) return;\n \n     // Verify that the incoming gradient tensor has the expected size\n     // [ batch, out_rows, out_cols, depth ]\n@@ -318,8 +320,10 @@ struct DilationBackpropInput<CPUDevice, T> {\n                 }\n               }\n             }\n-            in_backprop(b, h_in_max, w_in_max, d) +=\n-                out_backprop(b, h_out, w_out, d);\n+            if (h_in_max < input_rows && w_in_max < input_cols) {\n+              in_backprop(b, h_in_max, w_in_max, d) +=\n+                  out_backprop(b, h_out, w_out, d);\n+            }\n           }\n         }\n       }\n@@ -349,6 +353,7 @@ class DilationBackpropFilterOp : public OpKernel {\n     ParseSizes(context, strides_, rates_, padding_, &stride_rows, &stride_cols,\n                &rate_rows, &rate_cols, &pad_top, &pad_left, &out_rows,\n                &out_cols);\n+    if (!context->status().ok()) return;\n \n     // Verify that the incoming gradient tensor has the expected size\n     // [ batch, out_rows, out_cols, depth ]\n@@ -438,8 +443,10 @@ struct DilationBackpropFilter<CPUDevice, T> {\n                 }\n               }\n             }\n-            filter_backprop(h_max, w_max, d) +=\n-                out_backprop(b, h_out, w_out, d);\n+            if (h_max < filter_rows && w_max < filter_cols) {\n+              filter_backprop(h_max, w_max, d) +=\n+                  out_backprop(b, h_out, w_out, d);\n+            }\n           }\n         }\n       }"
    }
}